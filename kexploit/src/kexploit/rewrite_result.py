from typing import TypeVar, Generic, Self

T = TypeVar('T')
class RewriteResult(Generic[T]):
    result: T | str

    def __init__(self, result: T | str):
        self.result = result
    
    @classmethod
    def ok(cls, value: T) -> Self:
        return cls(value)
    
    @classmethod
    def error(cls, message: str) -> Self:
        return cls(message)
    
    # FIXME: if T = str, issues can occur
    def is_error(self) -> bool:
        match self.result:
            case str(_):
                return True
            case _:
                return False